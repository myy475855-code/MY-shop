{% extends "base.html" %}
{% block body %}

<div class="container my-5">
  <h3 class="text-primary mb-4"><i class="bi bi-box-seam"></i> Upload New Product</h3>

  <div class="lux-card shadow-lg rounded-4 animate__animated animate__fadeInUp">
    <div class="card-body">
      <form method="POST" action="{{ url_for('upload_product') }}" enctype="multipart/form-data">

        <!-- Product Name -->
        <div class="lux-input">
          <input type="text" id="productName" name="product_name" required>
          <label>Product Name <span class="text-danger">*</span></label>
        </div>

        <!-- Price & Discount -->
        <div class="row g-3 mb-3">
          <div class="col-md-6">
            <div class="lux-input">
              <input type="number" step="0.01" id="price" name="price" required>
              <label>Price <span class="text-danger">*</span></label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="lux-input">
              <input type="number" step="0.01" id="discounted_price" name="discounted_price">
              <label>Discounted Price</label>
            </div>
          </div>
        </div>

        <!-- Description -->
        <div class="lux-input">
          <textarea id="description" name="description" rows="3" required></textarea>
          <label>Description <span class="text-danger">*</span></label>
        </div>

        <!-- Images -->
        <div class="lux-input">
          <label>Images <span class="text-danger">*</span></label>
          <div id="imageInputs">
            <input type="file" name="image1" accept="image/*" required>
          </div>
          <button type="button" class="btn btn-sm btn-outline-primary mt-1 btn-hover-scale" id="addImageBtn">Add More Image (max 4)</button>
        </div>

        <!-- Categories -->
        <div class="lux-input">
          <label>Categories <span class="text-danger">*</span></label>
          <div id="categoryInputs">
            <input type="text" name="categories[]" placeholder="Enter category" required>
          </div>
          <button type="button" class="btn btn-sm btn-outline-primary mt-1 btn-hover-scale" id="addCategoryBtn">Add More Category (max 5)</button>
        </div>

        <!-- Specifications -->
        <div class="lux-input">
          <label>Specifications</label>
          <div id="specInputs">
            <div class="row mb-2 spec-row">
              <div class="col-md-6">
                <input type="text" name="spec_name[]" placeholder="Name (e.g., Weight)" required>
              </div>
              <div class="col-md-6">
                <input type="text" name="spec_type[]" placeholder="Type (e.g., 1kg)" required>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-sm btn-outline-primary mt-1 btn-hover-scale" id="addSpecBtn">Add More Spec (max 5)</button>
        </div>

        <div class="d-grid mt-4">
          <button type="submit" class="lux-btn"><i class="bi bi-upload"></i> Upload Product</button>
        </div>

      </form>
    </div>
  </div>
</div>

<style>
/* Glass Card */
.lux-card{
  background: linear-gradient(135deg, rgba(255,255,255,.28), rgba(255,255,255,.08));
  backdrop-filter: blur(45px) saturate(180%);
  -webkit-backdrop-filter: blur(45px) saturate(180%);
  border:1px solid rgba(255,255,255,.35);
  box-shadow: inset 0 0 40px rgba(255,255,255,.25), 0 0 80px rgba(120,140,255,.35), 0 30px 80px rgba(0,0,0,.5);
  border-radius:30px;
  padding:40px;
  overflow:hidden;
  transition:.7s cubic-bezier(.16,1,.3,1);
}
.lux-card:hover{
  transform: translateY(-6px) scale(1.02);
}
.lux-card::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,.45), transparent 65%);
  opacity:.15;
  pointer-events:none;
}

/* Inputs */
.lux-input{position:relative;margin-bottom:20px;}
.lux-input input,
.lux-input textarea{
  width:100%;
  background: rgba(255,255,255,.12);
  backdrop-filter: blur(12px);
  border-radius:12px;
  padding:14px 16px;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
  outline:none;
  font-size:15px;
  transition:.3s;
}
.lux-input input:focus,
.lux-input textarea:focus{
  border-color:#8fa3ff;
  box-shadow:0 0 15px rgba(140,160,255,.5);
}
.lux-input label{
  position:absolute;
  left:16px; top:14px;
  color:#ddd;
  pointer-events:none;
  transition:.4s cubic-bezier(.16,1,.3,1);
}
.lux-input input:focus + label,
.lux-input input:valid + label,
.lux-input textarea:focus + label,
.lux-input textarea:valid + label{
  top:-10px;
  font-size:12px;
  color:#b6c2ff;
}

/* Buttons */
.lux-btn{
  padding:16px;
  border-radius:18px;
  border:none;
  font-weight:700;
  background: linear-gradient(120deg,#6a11cb,#2575fc,#6a11cb);
  background-size:200%;
  animation:gradientMove 4s linear infinite;
  color:#fff;
  transition:.4s;
}
.lux-btn:hover{
  box-shadow:0 0 30px rgba(140,160,255,.7);
  transform:translateY(-3px) scale(1.05);
}

/* Hover scale for small buttons */
.btn-hover-scale{
  transition: transform .2s, box-shadow .2s;
}
.btn-hover-scale:hover{
  transform: scale(1.05);
  box-shadow:0 5px 15px rgba(0,0,0,.15);
}

@keyframes gradientMove{
  0%{background-position:0%}
  100%{background-position:200%}
}
</style>

<script>
  // Dynamic Image Inputs
  let imageCount = 1;
  document.getElementById('addImageBtn').addEventListener('click', () => {
    if(imageCount >= 4) return alert("Maximum 4 images allowed");
    imageCount++;
    const input = document.createElement('input');
    input.type = 'file';
    input.name = 'image' + imageCount;
    input.accept = 'image/*';
    document.getElementById('imageInputs').appendChild(input);
  });

  // Dynamic Category Inputs
  let categoryCount = 1;
  document.getElementById('addCategoryBtn').addEventListener('click', () => {
    if(categoryCount >= 5) return alert("Maximum 5 categories allowed");
    categoryCount++;
    const input = document.createElement('input');
    input.type = 'text';
    input.name = 'categories[]';
    input.placeholder = 'Enter category';
    document.getElementById('categoryInputs').appendChild(input);
  });

  // Dynamic Specifications
  let specCount = 1;
  document.getElementById('addSpecBtn').addEventListener('click', () => {
    if(specCount >= 5) return alert("Maximum 5 specifications allowed");
    specCount++;
    const div = document.createElement('div');
    div.className = 'row mb-2 spec-row';
    div.innerHTML = `
      <div class="col-md-6">
        <input type="text" name="spec_name[]" class="form-control form-control-hover" placeholder="Name (e.g., Weight)" required>
      </div>
      <div class="col-md-6">
        <input type="text" name="spec_type[]" class="form-control form-control-hover" placeholder="Type (e.g., 1kg)" required>
      </div>
    `;
    document.getElementById('specInputs').appendChild(div);
  });
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
{% endblock %}
