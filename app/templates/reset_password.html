{% extends "layout.html" %}
{% block body %}

<div class="row justify-content-center">
  <div class="col-md-6 col-lg-4">
    <div class="glass-card shadow-lg rounded-4 animate__animated animate__fadeInDown">
      <div class="card-body p-4">

        <h3 class="lux-title text-center text-primary"><i class="bi bi-key-fill"></i> Reset Password</h3>
        <p class="lux-sub text-center mb-4">
          Create a new password for your account.
        </p>

        <form method="POST" id="resetPasswordForm">

          <div class="lux-input">
            <input type="password" name="newPassword" id="newPassword" required>
            <label>New Password</label>
          </div>

          <div class="lux-input">
            <input type="password" name="confirmPassword" id="confirmPassword" required>
            <label>Confirm Password</label>
            <div id="passwordMatchMessage" class="form-text text-danger mt-1" style="display:none;">
              Passwords do not match.
            </div>
          </div>

          <button type="submit" class="lux-btn w-100">
            <i class="bi bi-arrow-repeat"></i> Reset Password
          </button>

        </form>

        <div class="text-center mt-3">
          <a href="{{ url_for('login') }}" class="text-decoration-none text-primary fw-semibold">
            Back to login
          </a>
        </div>

      </div>
    </div>
  </div>
</div>

<style>
/* Glass Card */
.glass-card{
  background: linear-gradient(135deg, rgba(255,255,255,.28), rgba(255,255,255,.08));
  backdrop-filter: blur(45px) saturate(180%);
  -webkit-backdrop-filter: blur(45px) saturate(180%);
  border: 1px solid rgba(255,255,255,.35);
  box-shadow: inset 0 0 40px rgba(255,255,255,.25), 0 0 80px rgba(120,140,255,.35), 0 20px 80px rgba(0,0,0,.5);
  overflow: hidden;
  transition: .7s cubic-bezier(.16,1,.3,1);
}
.glass-card:hover{
  transform: translateY(-6px) scale(1.02);
}
.glass-card::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,.45), transparent 65%);
  opacity: .15;
  pointer-events: none;
}

/* Titles */
.lux-title{
  font-weight:900;
  letter-spacing:1px;
  color:#fff;
  margin-bottom:6px;
}
.lux-sub{
  font-size:14px;
  color:#ddd;
  margin-bottom:25px;
}

/* Inputs */
.lux-input{position:relative;margin-bottom:20px;}
.lux-input input{
  width:100%;
  background: rgba(255,255,255,.12);
  backdrop-filter: blur(12px);
  border-radius: 12px;
  padding: 14px 16px;
  border: 1px solid rgba(255,255,255,.25);
  color: #fff;
  outline: none;
  transition: .3s;
}
.lux-input input:focus{
  border-color: #8fa3ff;
  box-shadow:0 0 15px rgba(140,160,255,.5);
}
.lux-input label{
  position:absolute;
  left:16px; top:50%;
  transform: translateY(-50%);
  color: #ddd;
  pointer-events:none;
  transition: .4s cubic-bezier(.16,1,.3,1);
}
.lux-input input:focus + label,
.lux-input input:valid + label{
  top:-10px;
  font-size:12px;
  color:#b6c2ff;
}

/* Button */
.lux-btn{
  margin-top:10px;
  padding:14px;
  border-radius:18px;
  border:none;
  width:100%;
  font-weight:700;
  background: linear-gradient(120deg,#6a11cb,#2575fc,#6a11cb);
  background-size:200%;
  animation:gradientMove 4s linear infinite;
  color:#fff;
  transition: .4s;
}
.lux-btn:hover{
  box-shadow:0 0 30px rgba(140,160,255,.7);
  transform: translateY(-3px) scale(1.04);
}

@keyframes gradientMove{
  0%{background-position:0%}
  100%{background-position:200%}
}
</style>

<script>
const form = document.getElementById('resetPasswordForm');
const newPassword = document.getElementById('newPassword');
const confirmPassword = document.getElementById('confirmPassword');
const message = document.getElementById('passwordMatchMessage');

form.addEventListener('submit', (e) => {
  if(newPassword.value !== confirmPassword.value){
    e.preventDefault();
    message.style.display = 'block';
    confirmPassword.focus();
  } else {
    message.style.display = 'none';
  }
});

confirmPassword.addEventListener('input', () => {
  message.style.display = (newPassword.value !== confirmPassword.value) ? 'block' : 'none';
});
</script>

{% endblock %}
