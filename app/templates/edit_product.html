{% extends "base.html" %}
{% block body %}

<div class="container my-5">
  <h3 class="text-warning mb-4"><i class="bi bi-pencil-square"></i> Edit Product</h3>

  <div class="lux-card shadow-lg rounded-4">
    <div class="card-body">
      <form method="POST" enctype="multipart/form-data">

        <!-- Product Name -->
        <div class="lux-input">
          <input type="text" name="product_name" value="{{ product.name }}" required>
          <label>Product Name</label>
        </div>

        <!-- Price & Discount -->
        <div class="row g-3 mb-3">
          <div class="col-md-6">
            <div class="lux-input">
              <input type="number" step="0.01" name="price" value="{{ product.price }}" required>
              <label>Price</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="lux-input">
              <input type="number" step="0.01" name="discount_price" value="{{ product.discount_price }}">
              <label>Discounted Price</label>
            </div>
          </div>
        </div>

        <!-- Description -->
        <div class="lux-input">
          <textarea name="description" rows="4" required>{{ product.description }}</textarea>
          <label>Description</label>
        </div>

        <!-- Categories -->
        <div class="lux-input">
          <label>Categories</label>
          <div id="categoryInputs">
            {% for cat in product.categories.split(',') %}
              <input type="text" name="categories[]" value="{{ cat }}">
            {% endfor %}
          </div>
        </div>

        <!-- Specifications -->
        <div class="lux-input">
          <label>Specifications</label>
          <div id="specInputs">
            {% if product.specifications %}
              {% for line in product.specifications.split('\n') %}
                {% set parts = line.split(':') %}
                <div class="row mb-2">
                  <div class="col-md-6">
                    <input type="text" name="spec_name[]" value="{{ parts[0] }}">
                  </div>
                  <div class="col-md-6">
                    <input type="text" name="spec_value[]" value="{{ parts[1] if parts|length > 1 else '' }}">
                  </div>
                </div>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <!-- Images -->
        <div class="lux-input">
          <label>Replace Images (optional)</label>
          <input type="file" name="image1" class="mb-2">
          <input type="file" name="image2" class="mb-2">
          <input type="file" name="image3" class="mb-2">
          <input type="file" name="image4" class="mb-2">
        </div>

        <div class="d-grid mt-4">
          <button type="submit" class="lux-btn"><i class="bi bi-save"></i> Update Product</button>
        </div>

      </form>
    </div>
  </div>
</div>

<style>
/* Glass Card */
.lux-card{
  background: linear-gradient(135deg, rgba(255,255,255,.28), rgba(255,255,255,.08));
  backdrop-filter: blur(45px) saturate(180%);
  -webkit-backdrop-filter: blur(45px) saturate(180%);
  border:1px solid rgba(255,255,255,.35);
  box-shadow: inset 0 0 40px rgba(255,255,255,.25), 0 0 80px rgba(120,140,255,.35), 0 30px 80px rgba(0,0,0,.5);
  border-radius:30px;
  overflow:hidden;
  padding:40px;
  transition:.7s cubic-bezier(.16,1,.3,1);
}
.lux-card:hover{
  transform: translateY(-4px) scale(1.02);
}

/* Inputs */
.lux-input{position:relative;margin-bottom:20px;}
.lux-input input,
.lux-input textarea{
  width:100%;
  background: rgba(255,255,255,.12);
  backdrop-filter: blur(12px);
  border-radius:12px;
  padding:14px 16px;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
  outline:none;
  font-size:15px;
  transition:.3s;
}
.lux-input input:focus,
.lux-input textarea:focus{
  border-color:#8fa3ff;
  box-shadow:0 0 15px rgba(140,160,255,.5);
}
.lux-input label{
  position:absolute;
  left:16px;
  top:14px;
  color:#ddd;
  pointer-events:none;
  transition:.4s cubic-bezier(.16,1,.3,1);
}
.lux-input input:focus + label,
.lux-input input:valid + label,
.lux-input textarea:focus + label,
.lux-input textarea:valid + label{
  top:-10px;
  font-size:12px;
  color:#b6c2ff;
}

/* Button */
.lux-btn{
  padding:16px;
  border-radius:18px;
  border:none;
  font-weight:700;
  background: linear-gradient(120deg,#ffc107,#ffb300,#ffc107);
  background-size:200%;
  animation:gradientMove 4s linear infinite;
  color:#fff;
  transition:.4s;
}
.lux-btn:hover{
  box-shadow:0 0 30px rgba(255,193,7,.7);
  transform:translateY(-3px) scale(1.05);
}

@keyframes gradientMove{
  0%{background-position:0%}
  100%{background-position:200%}
}
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

{% endblock %}
